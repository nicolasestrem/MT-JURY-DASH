!function(t){"use strict";function n(){const n=t("#mt-quick-view-modal");n.removeClass("active"),setTimeout(function(){n.find(".mt-modal-body").empty()},300)}t(document).ready(function(){!function(){let n;t(".mt-filter-btn").on("click",function(n){n.preventDefault();const e=t(this),a=e.data("filter");t(".mt-filter-btn").removeClass("active"),e.addClass("active"),function(n){const e=t(".mt-candidate-card");let a=0;e.each(function(e){const i=t(this);"all"===n||i.hasClass("category-"+n)?(setTimeout(function(){i.removeClass("hidden").fadeIn(300)},50*a),a++):i.fadeOut(300,function(){t(this).addClass("hidden")})}),0===a?function(){t(".mt-no-results").length||t(".mt-candidates-enhanced-grid").append('\n                <div class="mt-no-results">\n                    <div class="mt-no-results-icon">üîç</div>\n                    <div class="mt-no-results-text">Keine Kandidaten gefunden</div>\n                    <div class="mt-no-results-hint">Versuchen Sie, Ihre Filterkriterien anzupassen</div>\n                </div>\n            ');t(".mt-no-results").fadeIn()}():t(".mt-no-results").fadeOut(function(){t(this).remove()})}(a)}),t("#mt-candidate-search").on("input",function(){clearTimeout(n);const e=t(this).val().toLowerCase();n=setTimeout(function(){!function(n){const e=t(".mt-candidate-card");let a=0;e.each(function(){const e=t(this),i=e.data("name")||"",o=e.data("org")||"",s=e.data("position")||"";i.includes(n)||o.includes(n)||s.includes(n)?(e.removeClass("hidden").fadeIn(300),function(n,e){if(!e)return;const a=n.find(".mt-card-name, .mt-card-title");a.each(function(){const n=t(this),a=n.text(),i=new RegExp("("+e+")","gi"),o=a.replace(i,"<mark>$1</mark>");n.html(o)})}(e,n),a++):e.fadeOut(300,function(){t(this).addClass("hidden")})}),function(n){t(".mt-results-count").length||t(".mt-grid-controls").append('<div class="mt-results-count"></div>');t(".mt-results-count").text(n+" Kandidaten gefunden")}(a)}(e)},300)}),t(".mt-candidate-card").hover(function(){t(this).find(".mt-card-image").css("transform","scale(1.1)")},function(){t(this).find(".mt-card-image").css("transform","scale(1)")})}(),t("#mt-load-more").on("click",function(){const n=t(this);n.addClass("loading"),setTimeout(function(){n.removeClass("loading")},800)}),t(".mt-view-toggle").on("click",function(){const n=t(this).data("view");t(".mt-view-toggle").removeClass("active"),t(this).addClass("active"),"grid"===n?t(".mt-candidates-enhanced-grid").removeClass("list-view"):t(".mt-candidates-enhanced-grid").addClass("list-view")}),t("#mt-sort-select").on("change",function(){!function(n){const e=t(".mt-candidates-enhanced-grid").find(".mt-candidate-card").toArray();e.sort(function(e,a){const i=t(e).data(n)||"",o=t(a).data(n)||"";return"name"===n?i.localeCompare(o):"date"===n?new Date(o)-new Date(i):0}),e.forEach(function(n,e){setTimeout(function(){t(n).css("order",e)},30*e)})}(t(this).val())}),function(){t(window).on("scroll",function(){const n=t(window).scrollTop();t(".mt-hero-pattern").css("transform","translateY("+.5*n+"px)"),t(".mt-profile-header-enhanced").css("transform","translateY("+.2*n+"px)")});const n=new IntersectionObserver(function(n){n.forEach(function(n){n.isIntersecting&&t(n.target).addClass("animated")})},{threshold:.1});t(".mt-criterion-card").each(function(){n.observe(this)}),t(".mt-progress-bar").each(function(){const n=t(this),e=n.data("value"),a=new IntersectionObserver(function(t){t[0].isIntersecting&&(n.css("width",e+"%"),a.unobserve(n[0]))});a.observe(this)})}(),function(){if("IntersectionObserver"in window){const n=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){const a=t(e.target),i=a.data("src");i&&(a.attr("src",i).removeAttr("data-src"),a.on("load",function(){t(this).addClass("loaded")}),n.unobserve(e.target))}})});t("img[data-src]").each(function(){n.observe(this)})}}(),function(){t("#mt-quick-view-modal").length||t("body").append('\n                <div id="mt-quick-view-modal" class="mt-modal">\n                    <div class="mt-modal-overlay"></div>\n                    <div class="mt-modal-content">\n                        <button class="mt-modal-close">&times;</button>\n                        <div class="mt-modal-body"></div>\n                    </div>\n                </div>\n            ');t(".mt-quick-view-btn").on("click",function(n){n.preventDefault(),n.stopPropagation();!function(n){const e=t("#mt-quick-view-modal"),a=e.find(".mt-modal-body");a.html('<div class="mt-loading-spinner"></div>'),e.addClass("active"),t.ajax({url:mt_ajax.ajax_url,type:"POST",data:{action:"mt_get_candidate_quick_view",candidate_id:n,nonce:mt_ajax.nonce},success:function(t){t.success&&a.html(t.data.html)},error:function(){a.html("<p>"+(mt_ajax.i18n.load_error||"Error loading candidate information.")+"</p>")}})}(t(this).data("candidate-id"))}),t(".mt-modal-close, .mt-modal-overlay").on("click",function(){n()}),t(document).on("keyup",function(t){"Escape"===t.key&&n()})}(),t('a[href^="#"]').on("click",function(n){const e=t(this.getAttribute("href"));e.length&&(n.preventDefault(),t("html, body").animate({scrollTop:e.offset().top-100},800))})}),t(document).on("keydown",function(n){if(t(".mt-candidates-enhanced-grid").length){const e=t(".mt-candidate-card:focus");if(e.length){let t;switch(n.key){case"ArrowRight":t=e.next(".mt-candidate-card:not(.hidden)");break;case"ArrowLeft":t=e.prev(".mt-candidate-card:not(.hidden)");break;case"Enter":window.location.href=e.find(".mt-card-link").attr("href")}t&&t.length&&(n.preventDefault(),t.focus())}}})}(jQuery);