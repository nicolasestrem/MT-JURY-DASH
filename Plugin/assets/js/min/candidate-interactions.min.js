(o=>{function e(){let t=o("#mt-quick-view-modal");t.removeClass("active"),setTimeout(function(){t.find(".mt-modal-body").empty()},300)}o(document).ready(function(){{o(".mt-filter-btn").on("click",function(t){t.preventDefault();var t=o(this),e=t.data("filter");o(".mt-filter-btn").removeClass("active"),t.addClass("active");{var n=e;let t=o(".mt-candidate-card"),a=0;t.each(function(t){let e=o(this);"all"===n||e.hasClass("category-"+n)?(setTimeout(function(){e.removeClass("hidden").fadeIn(300)},50*a),a++):e.fadeOut(300,function(){o(this).addClass("hidden")})}),0===a?(o(".mt-no-results").length||o(".mt-candidates-enhanced-grid").append(`
                <div class="mt-no-results">
                    <div class="mt-no-results-icon">üîç</div>
                    <div class="mt-no-results-text">Keine Kandidaten gefunden</div>
                    <div class="mt-no-results-hint">Versuchen Sie, Ihre Filterkriterien anzupassen</div>
                </div>
            `),o(".mt-no-results").fadeIn()):o(".mt-no-results").fadeOut(function(){o(this).remove()})}});let t;o("#mt-candidate-search").on("input",function(){clearTimeout(t);let a=o(this).val().toLowerCase();t=setTimeout(function(){{var s=a;let t=o(".mt-candidate-card"),d=0;t.each(function(){var n,t=o(this),e=t.data("name")||"",a=t.data("org")||"",i=t.data("position")||"";e.includes(s)||a.includes(s)||i.includes(s)?(t.removeClass("hidden").fadeIn(300),e=t,(n=s)&&e.find(".mt-card-name, .mt-card-title").each(function(){var t=o(this),e=t.text(),a=new RegExp("("+n+")","gi"),e=e.replace(a,"<mark>$1</mark>");t.html(e)}),d++):t.fadeOut(300,function(){o(this).addClass("hidden")})});var e=d;o(".mt-results-count").length||o(".mt-grid-controls").append('<div class="mt-results-count"></div>'),o(".mt-results-count").text(e+" Kandidaten gefunden")}},300)}),o(".mt-candidate-card").hover(function(){o(this).find(".mt-card-image").css("transform","scale(1.1)")},function(){o(this).find(".mt-card-image").css("transform","scale(1)")})}{let e=1;o("#mt-load-more").on("click",function(){let t=o(this);t.addClass("loading"),setTimeout(function(){e,e++,t.removeClass("loading")},800)}),o(".mt-view-toggle").on("click",function(){var t=o(this).data("view");o(".mt-view-toggle").removeClass("active"),o(this).addClass("active"),"grid"===t?o(".mt-candidates-enhanced-grid").removeClass("list-view"):o(".mt-candidates-enhanced-grid").addClass("list-view")}),o("#mt-sort-select").on("change",function(){var a,t=o(this).val();a=t,(t=(t=o(".mt-candidates-enhanced-grid")).find(".mt-candidate-card").toArray()).sort(function(t,e){t=o(t).data(a)||"",e=o(e).data(a)||"";return"name"===a?t.localeCompare(e):"date"===a?new Date(e)-new Date(t):0}),t.forEach(function(t,e){setTimeout(function(){o(t).css("order",e)},30*e)})})}{o(window).on("scroll",function(){var t=o(window).scrollTop();o(".mt-hero-pattern").css("transform","translateY("+.5*t+"px)"),o(".mt-profile-header-enhanced").css("transform","translateY("+.2*t+"px)")});let t=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&o(t.target).addClass("animated")})},{threshold:.1});o(".mt-criterion-card").each(function(){t.observe(this)}),o(".mt-progress-bar").each(function(){let e=o(this),a=e.data("value"),n=new IntersectionObserver(function(t){t[0].isIntersecting&&(e.css("width",a+"%"),n.unobserve(e[0]))});n.observe(this)})}if("IntersectionObserver"in window){let n=new IntersectionObserver(function(t){t.forEach(function(t){var e,a;t.isIntersecting&&(a=(e=o(t.target)).data("src"))&&(e.attr("src",a).removeAttr("data-src"),e.on("load",function(){o(this).addClass("loaded")}),n.unobserve(t.target))})});o("img[data-src]").each(function(){n.observe(this)})}o("#mt-quick-view-modal").length||o("body").append(`
                <div id="mt-quick-view-modal" class="mt-modal">
                    <div class="mt-modal-overlay"></div>
                    <div class="mt-modal-content">
                        <button class="mt-modal-close">&times;</button>
                        <div class="mt-modal-body"></div>
                    </div>
                </div>
            `),o(".mt-quick-view-btn").on("click",function(a){a.preventDefault(),a.stopPropagation();a=o(this).data("candidate-id");{let t=o("#mt-quick-view-modal"),e=t.find(".mt-modal-body");e.html('<div class="mt-loading-spinner"></div>'),t.addClass("active"),o.ajax({url:mt_ajax.ajax_url,type:"POST",data:{action:"mt_get_candidate_quick_view",candidate_id:a,nonce:mt_ajax.nonce},success:function(t){t.success&&e.html(t.data.html)},error:function(){e.html("<p>"+(mt_ajax.i18n.load_error||"Error loading candidate information.")+"</p>")}})}}),o(".mt-modal-close, .mt-modal-overlay").on("click",function(){e()}),o(document).on("keyup",function(t){"Escape"===t.key&&e()}),o('a[href^="#"]').on("click",function(t){var e=o(this.getAttribute("href"));e.length&&(t.preventDefault(),o("html, body").animate({scrollTop:e.offset().top-100},800))})}),o(document).on("keydown",function(e){if(o(".mt-candidates-enhanced-grid").length){var a=o(".mt-candidate-card:focus");if(a.length){let t;switch(e.key){case"ArrowRight":t=a.next(".mt-candidate-card:not(.hidden)");break;case"ArrowLeft":t=a.prev(".mt-candidate-card:not(.hidden)");break;case"Enter":window.location.href=a.find(".mt-card-link").attr("href")}t&&t.length&&(e.preventDefault(),t.focus())}}})})(jQuery);