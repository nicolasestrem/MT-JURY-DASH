!function(t){"use strict";t(document).ready(function(){function e(){t(".mt-score-slider").off(".mt-evaluation"),t(document).off("input.mt-evaluation change.mt-evaluation",".mt-score-slider"),t(".mt-score-slider").each(function(){var e=t(this);if(e.attr("name")){e.off("change.mt-evaluation input.mt-evaluation"),e.on("input.mt-evaluation change.mt-evaluation",function(e){e.stopPropagation();var a=t(this).val();t(this).closest(".mt-criterion-card").find(".mt-score-value").text(a);var i=a/10*100;t(this).css("background","linear-gradient(to right, #667eea 0%, #667eea "+i+"%, #e5e7eb "+i+"%, #e5e7eb 100%)"),o()});var a=e.val()/10*100;e.css("background","linear-gradient(to right, #667eea 0%, #667eea "+a+"%, #e5e7eb "+a+"%, #e5e7eb 100%)")}})}function a(){t(".mt-score-mark").off("click.mt-evaluation"),t(".mt-score-mark").on("click.mt-evaluation",function(e){e.preventDefault(),e.stopPropagation();var a=t(this).data("value");t(this).closest(".mt-criterion-card").find(".mt-score-slider").val(a).trigger("input"),t(this).addClass("selected").siblings().removeClass("selected")})}function o(){var e=0,a=0;if(t(".mt-score-slider").each(function(){var o=parseFloat(t(this).val());isNaN(o)||(e+=o,a++)}),0===a&&t(".mt-button-group").each(function(){var o=t(this).find('input[type="hidden"]'),i=parseFloat(o.val());isNaN(i)||(e+=i,a++)}),a>0){var o=(e/a).toFixed(1);t("#mt-total-score").text(o),t(".mt-total-score-value").text(o),t(".mt-average-score").text(o+"/10"),t(".mt-evaluated-count").text("("+a+"/5 criteria evaluated)")}}function i(){setTimeout(function(){t(".mt-score-slider").off(".mt-evaluation"),t(document).off("input.mt-evaluation change.mt-evaluation",".mt-score-slider"),t(".mt-score-button").off(".mt-evaluation"),t(document).off("click.mt-evaluation",".mt-score-button"),t(".mt-score-mark").off(".mt-evaluation"),t(".mt-button-group").length>0&&(t(".mt-score-button").off(".mt-evaluation"),t(document).off("click.mt-evaluation",".mt-score-button"),t(".mt-button-group").each(function(){var e=t(this),a=(e.data("criterion"),e.find('input[type="hidden"]'));e.find(".mt-score-button").on("click.mt-evaluation",function(i){i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation();var n=t(this),r=n.data("value");e.find(".mt-score-button").removeClass("active selected"),n.addClass("active selected"),a.val(r),e.closest(".mt-criterion-card").find(".mt-score-value").text(r),o(),"undefined"!=typeof MTJuryDashboard&&MTJuryDashboard.updateTotalScore&&MTJuryDashboard.updateTotalScore()})})),t(".mt-score-slider").length>0&&e(),a(),o(),t("#mt-evaluation-form").off("submit.mt-evaluation").on("submit.mt-evaluation",function(e){var a=!0,o=[];if(t(".mt-score-slider").each(function(){var e=parseFloat(t(this).val()),i=t(this).attr("name");(isNaN(e)||0===e)&&(a=!1,o.push(i.replace("_score","")))}),!a&&5===o.length)return e.preventDefault(),alert(mt_ajax&&mt_ajax.i18n&&mt_ajax.i18n.please_rate_criteria?mt_ajax.i18n.please_rate_criteria:"Please rate at least one criterion before submitting."),!1}),t(document).off("ajaxComplete.mt-evaluation").on("ajaxComplete.mt-evaluation",function(t,i,n){n.url&&(n.url.includes("evaluate")||n.url.includes("mt_get_candidate"))&&setTimeout(function(){e(),a(),o()},100)}),window.location.search.includes("debug=1")&&(t("body").append('<div id="evaluation-debug" style="position:fixed;bottom:10px;right:10px;background:#fff;border:2px solid #000;padding:10px;z-index:9999;"><h4>Evaluation Debug</h4><div id="debug-values"></div></div>'),setInterval(function(){var e="";t(".mt-score-slider").each(function(){e+=t(this).attr("name")+": "+t(this).val()+"<br>"}),t("#debug-values").html(e)},1e3))},750)}i(),t(window).off("load.mt-evaluation").on("load.mt-evaluation",function(){t(".mt-score-slider").length>0&&i()}),window.MTEvaluationFix={reinitialize:i}})}(jQuery);